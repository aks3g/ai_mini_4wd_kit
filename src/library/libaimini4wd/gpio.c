/*
 * gpio.c
 *
 * Created: 2019/03/10
 * Copyright ? 2019 Kiyotaka Akasaka. All rights reserved.
 */ 
#include <stdint.h>
#include <stddef.h>

#include <samd51_error.h>
#include <samd51_gpio.h>

int aiMini4wdInitializeGpio(void)
{
	//J 使っていないピンはそのままにするのが一番省電力らしい
	//J Analog Refernce
	samd51_gpio_configure(SAMD51_GPIO_A03, SAMD51_GPIO_IN, SAMD51_GPIO_NO_PULL, SAMD51_GPIO_MUX_FUNC_B);

	//J IR受光部 - 外部割込み5
	samd51_gpio_configure(SAMD51_GPIO_B16, SAMD51_GPIO_IN, SAMD51_GPIO_NO_PULL, SAMD51_GPIO_MUX_FUNC_A);

	//J LED
	samd51_gpio_configure(SAMD51_GPIO_B06, SAMD51_GPIO_OUT, SAMD51_GPIO_PULLUP_DOWN, SAMD51_GPIO_MUX_DEFAULT);
	samd51_gpio_configure(SAMD51_GPIO_B07, SAMD51_GPIO_OUT, SAMD51_GPIO_PULLUP_DOWN, SAMD51_GPIO_MUX_DEFAULT);
	samd51_gpio_configure(SAMD51_GPIO_B08, SAMD51_GPIO_OUT, SAMD51_GPIO_PULLUP_DOWN, SAMD51_GPIO_MUX_DEFAULT);
	samd51_gpio_configure(SAMD51_GPIO_B09, SAMD51_GPIO_OUT, SAMD51_GPIO_PULLUP_DOWN, SAMD51_GPIO_MUX_DEFAULT);
	samd51_gpio_configure(SAMD51_GPIO_A04, SAMD51_GPIO_OUT, SAMD51_GPIO_PULLUP_DOWN, SAMD51_GPIO_MUX_DEFAULT);
	
	samd51_gpio_output(SAMD51_GPIO_B06, 1);
	samd51_gpio_output(SAMD51_GPIO_B07, 1);
	samd51_gpio_output(SAMD51_GPIO_B08, 1);
	samd51_gpio_output(SAMD51_GPIO_B09, 1);
	samd51_gpio_output(SAMD51_GPIO_A04, 1);

	//J タコメータ（アナログ信号）
	samd51_gpio_configure(SAMD51_GPIO_A05, SAMD51_GPIO_IN, SAMD51_GPIO_PULLUP_DOWN, SAMD51_GPIO_MUX_FUNC_B);

	//J SDHC
	samd51_gpio_configure(SAMD51_GPIO_A06, SAMD51_GPIO_IN, SAMD51_GPIO_NO_PULL, SAMD51_GPIO_MUX_FUNC_I);
	samd51_gpio_configure(SAMD51_GPIO_A07, SAMD51_GPIO_IN, SAMD51_GPIO_NO_PULL, SAMD51_GPIO_MUX_FUNC_I);
	samd51_gpio_configure(SAMD51_GPIO_A08, SAMD51_GPIO_IN, SAMD51_GPIO_NO_PULL, SAMD51_GPIO_MUX_FUNC_I);
	samd51_gpio_configure(SAMD51_GPIO_A09, SAMD51_GPIO_IN, SAMD51_GPIO_NO_PULL, SAMD51_GPIO_MUX_FUNC_I);
	samd51_gpio_configure(SAMD51_GPIO_A10, SAMD51_GPIO_IN, SAMD51_GPIO_NO_PULL, SAMD51_GPIO_MUX_FUNC_I);
	samd51_gpio_configure(SAMD51_GPIO_A11, SAMD51_GPIO_IN, SAMD51_GPIO_NO_PULL, SAMD51_GPIO_MUX_FUNC_I);
	samd51_gpio_configure(SAMD51_GPIO_B10, SAMD51_GPIO_IN, SAMD51_GPIO_NO_PULL, SAMD51_GPIO_MUX_FUNC_I);
	samd51_gpio_configure(SAMD51_GPIO_B11, SAMD51_GPIO_IN, SAMD51_GPIO_NO_PULL, SAMD51_GPIO_MUX_FUNC_I);

	//J Motor Driver
	samd51_gpio_configure(SAMD51_GPIO_B12, SAMD51_GPIO_OUT, SAMD51_GPIO_PULLUP_DOWN, SAMD51_GPIO_MUX_DEFAULT);
	samd51_gpio_configure(SAMD51_GPIO_B13, SAMD51_GPIO_OUT, SAMD51_GPIO_PULLUP_DOWN, SAMD51_GPIO_MUX_DEFAULT);
	samd51_gpio_configure(SAMD51_GPIO_B14, SAMD51_GPIO_OUT, SAMD51_GPIO_PULLUP_DOWN, SAMD51_GPIO_MUX_DEFAULT);
	samd51_gpio_configure(SAMD51_GPIO_B15, SAMD51_GPIO_OUT, SAMD51_GPIO_PULLUP_DOWN, SAMD51_GPIO_MUX_DEFAULT);

	samd51_gpio_output(SAMD51_GPIO_B12, 0);
	samd51_gpio_output(SAMD51_GPIO_B13, 0);
	samd51_gpio_output(SAMD51_GPIO_B14, 0);
	samd51_gpio_output(SAMD51_GPIO_B15, 0);

	//J Ext. SERCOM
	samd51_gpio_configure(SAMD51_GPIO_A12, SAMD51_GPIO_OUT, SAMD51_GPIO_NO_PULL, SAMD51_GPIO_MUX_FUNC_C);
	samd51_gpio_configure(SAMD51_GPIO_A13, SAMD51_GPIO_OUT, SAMD51_GPIO_NO_PULL, SAMD51_GPIO_MUX_FUNC_C);

	//J Ext. GPIO
	samd51_gpio_configure(SAMD51_GPIO_A14, SAMD51_GPIO_IN, SAMD51_GPIO_NO_PULL, SAMD51_GPIO_MUX_DEFAULT);
	samd51_gpio_configure(SAMD51_GPIO_A15, SAMD51_GPIO_IN, SAMD51_GPIO_NO_PULL, SAMD51_GPIO_MUX_DEFAULT);

	//J Inner board  I2C and GPIO
	samd51_gpio_configure(SAMD51_GPIO_A16, SAMD51_GPIO_INOUT , SAMD51_GPIO_NO_PULL, SAMD51_GPIO_MUX_FUNC_D);
	samd51_gpio_configure(SAMD51_GPIO_A17, SAMD51_GPIO_INOUT,  SAMD51_GPIO_NO_PULL, SAMD51_GPIO_MUX_FUNC_D);
	samd51_gpio_configure(SAMD51_GPIO_A18, SAMD51_GPIO_IN, SAMD51_GPIO_PULLUP_DOWN, SAMD51_GPIO_MUX_FUNC_A);
	samd51_gpio_configure(SAMD51_GPIO_A19, SAMD51_GPIO_IN, SAMD51_GPIO_PULLUP_DOWN, SAMD51_GPIO_MUX_FUNC_A);

	//J Switch
	samd51_gpio_configure(SAMD51_GPIO_A21, SAMD51_GPIO_IN, SAMD51_GPIO_PULLUP_DOWN, SAMD51_GPIO_MUX_DEFAULT);
	samd51_gpio_configure(SAMD51_GPIO_A22, SAMD51_GPIO_IN, SAMD51_GPIO_PULLUP_DOWN, SAMD51_GPIO_MUX_DEFAULT);

	//J USB
	samd51_gpio_configure(SAMD51_GPIO_A24, SAMD51_GPIO_INOUT, SAMD51_GPIO_PULLUP_DOWN, SAMD51_GPIO_MUX_FUNC_H);
	samd51_gpio_configure(SAMD51_GPIO_A25, SAMD51_GPIO_INOUT, SAMD51_GPIO_PULLUP_DOWN, SAMD51_GPIO_MUX_FUNC_H);

	//J バッテリ電圧、ドライバ電流
	samd51_gpio_configure(SAMD51_GPIO_B02, SAMD51_GPIO_IN, SAMD51_GPIO_NO_PULL, SAMD51_GPIO_MUX_FUNC_B);
	samd51_gpio_configure(SAMD51_GPIO_B03, SAMD51_GPIO_IN, SAMD51_GPIO_NO_PULL, SAMD51_GPIO_MUX_FUNC_B);

	return 0;
}